<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSharp Phase 5: Native DOM API Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .demo-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-x: auto;
            white-space: pre-wrap;
            line-height: 1.5;
        }
        
        .websharp-code {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #2196f3;
        }
        
        .javascript-code {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #ff9800;
        }
        
        .success {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-left: 4px solid #4caf50;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .approach-card {
            padding: 20px;
            border-radius: 10px;
            border: 2px solid;
        }
        
        .old-approach {
            border-color: #ff9800;
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
        }
        
        .new-approach {
            border-color: #4caf50;
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
        }
        
        .implementation-status {
            background: linear-gradient(135deg, #e1f5fe 0%, #f3e5f5 100%);
            border: 2px solid #03a9f4;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .status-item {
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
        }

        .demo-area {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 100px;
        }
        
        #demo-output {
            margin-top: 20px;
        }
        
        .run-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }
        
        .run-button:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ WebSharp Phase 5: Native DOM API</h1>
        <p>C#-style DOM manipulation without JS.Call() - The JIT Runtime Bridge in Action!</p>
    </div>

    <div class="demo-section">
        <h2>üéØ Phase 5 Achievement: Natural C# DOM Syntax</h2>
        <p>Phase 5 transforms WebSharp from low-level <code>JS.Call()</code> interop to native C#-style DOM objects. This is achieved through a "JIT-like" runtime bridge that wraps browser DOM objects.</p>
        
        <div class="comparison">
            <div class="approach-card old-approach">
                <h3>‚ùå Phase 4: JS.Call() Approach</h3>
                <div class="code-block">
// Low-level, verbose JavaScript interop
var button = JS.Call("document.createElement", "button");
JS.Set(button, "textContent", "Click me!");
JS.Set(button, "style.backgroundColor", "blue");
JS.Call("document.body.appendChild", button);
                </div>
            </div>
            
            <div class="approach-card new-approach">
                <h3>‚úÖ Phase 5: Native DOM API</h3>
                <div class="code-block">
// Natural C#-style DOM manipulation
var button = new HTMLButtonElement();
button.TextContent = "Click me!";
button.Style.BackgroundColor = "blue";
Document.Body.AppendChild(button);
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üîß Implementation Architecture</h2>
        <p>Phase 5 uses a multi-layered approach to achieve native C# DOM syntax:</p>
        
        <div class="implementation-status">
            <h3>‚úÖ Core Implementation Complete</h3>
            <div class="status-grid">
                <div class="status-item">
                    <strong>üå≥ AST Nodes</strong><br>
                    DOMConstructorNode, DOMPropertyAccessNode, DOMMethodCallNode
                </div>
                <div class="status-item">
                    <strong>üìù Parser Extensions</strong><br>
                    Recognizes DOM types and transforms syntax
                </div>
                <div class="status-item">
                    <strong>‚ö° Code Generator</strong><br>
                    Outputs WebSharpDOM bridge calls
                </div>
                <div class="status-item">
                    <strong>üåê Runtime Bridge</strong><br>
                    JavaScript "JIT" that wraps DOM objects
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üíª Phase 5 WebSharp Code Example</h2>
        <div class="code-block websharp-code">
public class Phase5Demo {
    public static void Main() {
        // Create elements with natural C# syntax
        var container = new HTMLDivElement();
        container.Style.Padding = "20px";
        container.Style.Border = "2px solid #4caf50";
        container.Style.BorderRadius = "10px";
        container.Style.BackgroundColor = "#f1f8e9";
        
        var title = new HTMLDivElement();
        title.TextContent = "‚ú® Created with WebSharp Phase 5!";
        title.Style.FontSize = "18px";
        title.Style.FontWeight = "bold";
        title.Style.Color = "#2e7d32";
        title.Style.MarginBottom = "10px";
        
        var button = new HTMLButtonElement();
        button.TextContent = "Phase 5 Button";
        button.Style.BackgroundColor = "#4caf50";
        button.Style.Color = "white";
        button.Style.Padding = "10px 20px";
        button.Style.Border = "none";
        button.Style.BorderRadius = "5px";
        
        // Assemble the DOM
        container.AppendChild(title);
        container.AppendChild(button);
        Document.Body.AppendChild(container);
        
        Console.WriteLine("Phase 5 DOM elements created!");
    }
}
        </div>
    </div>

    <div class="demo-section">
        <h2>‚ö° Generated JavaScript (The "JIT" Bridge)</h2>
        <div class="code-block javascript-code">
// Generated JavaScript from Web# source
// Web# - Browser-native C#-like language

// WebSharp DOM Runtime Bridge - Phase 5
const WebSharpDOM = {
  Element: class {
    constructor(domElement) {
      this._dom = domElement;
    }
    
    get TextContent() { return this._dom.textContent; }
    set TextContent(value) { this._dom.textContent = value; }
    
    get Style() {
      if (!this._style) {
        this._style = new WebSharpDOM.CSSStyleDeclaration(this._dom.style);
      }
      return this._style;
    }
    
    AppendChild(child) {
      this._dom.appendChild(child._dom);
    }
  },
  
  HTMLButtonElement: class extends WebSharpDOM.Element {
    constructor() {
      super(document.createElement('button'));
    }
  },
  
  HTMLDivElement: class extends WebSharpDOM.Element {
    constructor() {
      super(document.createElement('div'));
    }
  },
  
  CSSStyleDeclaration: class {
    constructor(style) { this._style = style; }
    get BackgroundColor() { return this._style.backgroundColor; }
    set BackgroundColor(value) { this._style.backgroundColor = value; }
    // ... more CSS properties
  },
  
  Document: {
    get Body() {
      return new WebSharpDOM.Element(document.body);
    }
  }
};

class Phase5Demo {
  static Main() {
    const container = new WebSharpDOM.HTMLDivElement();
    container.Style.Padding = "20px";
    container.Style.Border = "2px solid #4caf50";
    // ... rest of the generated code
  }
}
        </div>
    </div>

    <div class="demo-section">
        <h2>üéÆ Live Demo</h2>
        <p>Click the button below to see Phase 5 DOM code in action!</p>
        
        <div class="demo-area">
            <button class="run-button" onclick="runPhase5Demo()">
                üöÄ Run Phase 5 DOM Code
            </button>
            <div id="demo-output"></div>
        </div>
    </div>

    <div class="demo-section">
        <h2>üåü Key Achievements</h2>
        <div class="success">
            <h3>‚úÖ Phase 5 Native DOM API - COMPLETE!</h3>
            <ul>
                <li><strong>üéØ Natural Syntax:</strong> C# developers can use familiar DOM object patterns</li>
                <li><strong>üîß Runtime Bridge:</strong> JavaScript "JIT" creates wrapper objects around real DOM elements</li>
                <li><strong>üìà Type Safety:</strong> Compile-time checking for DOM types and properties</li>
                <li><strong>üöÄ Performance:</strong> Minimal overhead - direct delegation to native DOM</li>
                <li><strong>üåê Browser Native:</strong> No external dependencies, works in any modern browser</li>
            </ul>
        </div>
    </div>

    <script>
        // Simulate the WebSharp DOM Runtime Bridge for demonstration
        const WebSharpDOM = {
            Element: class {
                constructor(domElement) {
                    this._dom = domElement;
                }
                
                get TextContent() { return this._dom.textContent; }
                set TextContent(value) { this._dom.textContent = value; }
                
                get Style() {
                    if (!this._style) {
                        this._style = new WebSharpDOM.CSSStyleDeclaration(this._dom.style);
                    }
                    return this._style;
                }
                
                AppendChild(child) {
                    this._dom.appendChild(child._dom);
                }
            },
            
            HTMLButtonElement: class extends WebSharpDOM.Element {
                constructor() {
                    super(document.createElement('button'));
                }
            },
            
            HTMLDivElement: class extends WebSharpDOM.Element {
                constructor() {
                    super(document.createElement('div'));
                }
            },
            
            CSSStyleDeclaration: class {
                constructor(style) {
                    this._style = style;
                }
                
                get BackgroundColor() { return this._style.backgroundColor; }
                set BackgroundColor(value) { this._style.backgroundColor = value; }
                
                get Color() { return this._style.color; }
                set Color(value) { this._style.color = value; }
                
                get Padding() { return this._style.padding; }
                set Padding(value) { this._style.padding = value; }
                
                get Border() { return this._style.border; }
                set Border(value) { this._style.border = value; }
                
                get BorderRadius() { return this._style.borderRadius; }
                set BorderRadius(value) { this._style.borderRadius = value; }
                
                get FontSize() { return this._style.fontSize; }
                set FontSize(value) { this._style.fontSize = value; }
                
                get FontWeight() { return this._style.fontWeight; }
                set FontWeight(value) { this._style.fontWeight = value; }
                
                get MarginBottom() { return this._style.marginBottom; }
                set MarginBottom(value) { this._style.marginBottom = value; }
            },
            
            Document: {
                get Body() {
                    return new WebSharpDOM.Element(document.body);
                }
            }
        };

        const Console = {
            WriteLine: function(message) {
                console.log(message);
                // Also display in demo output
                const output = document.getElementById('demo-output');
                const logDiv = document.createElement('div');
                logDiv.style.background = '#e8f5e8';
                logDiv.style.padding = '5px 10px';
                logDiv.style.margin = '5px 0';
                logDiv.style.borderRadius = '3px';
                logDiv.style.fontFamily = 'monospace';
                logDiv.textContent = 'üñ•Ô∏è Console: ' + message;
                output.appendChild(logDiv);
            }
        };

        // Simulate compiled WebSharp Phase 5 code
        class Phase5Demo {
            static Main() {
                // This is what WebSharp Phase 5 compiles to!
                const container = new WebSharpDOM.HTMLDivElement();
                container.Style.Padding = "20px";
                container.Style.Border = "2px solid #4caf50";
                container.Style.BorderRadius = "10px";
                container.Style.BackgroundColor = "#f1f8e9";
                
                const title = new WebSharpDOM.HTMLDivElement();
                title.TextContent = "‚ú® Created with WebSharp Phase 5!";
                title.Style.FontSize = "18px";
                title.Style.FontWeight = "bold";
                title.Style.Color = "#2e7d32";
                title.Style.MarginBottom = "10px";
                
                const button = new WebSharpDOM.HTMLButtonElement();
                button.TextContent = "Phase 5 Button";
                button.Style.BackgroundColor = "#4caf50";
                button.Style.Color = "white";
                button.Style.Padding = "10px 20px";
                button.Style.Border = "none";
                button.Style.BorderRadius = "5px";
                
                // Assemble the DOM
                container.AppendChild(title);
                container.AppendChild(button);
                
                // Add to demo output area instead of body
                const demoOutput = document.getElementById('demo-output');
                demoOutput.appendChild(container._dom);
                
                Console.WriteLine("Phase 5 DOM elements created!");
            }
        }

        function runPhase5Demo() {
            // Clear previous demo
            const output = document.getElementById('demo-output');
            output.innerHTML = '<h3>üéØ Running Phase 5 Compiled Code...</h3>';
            
            // Run the demo
            setTimeout(() => {
                Phase5Demo.Main();
            }, 500);
        }
    </script>
</body>
</html>
