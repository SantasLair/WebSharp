<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web# Phase 4 Demo - JavaScript Interop</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        .demo-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #764ba2;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 10px;
            overflow-x: auto;
            font-size: 12px;
        }
        .output {
            min-height: 100px;
            border: 2px dashed #ccc;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸŒ Web# Phase 4 Demo</h1>
        <p>JavaScript Interop - Web# code controlling the DOM</p>
    </div>

    <div class="demo-section">
        <h2>ğŸ“‹ Original Web# Source Code</h2>
        <pre><code>public class ButtonDemo {
    public static void Main() {
        var button = JS.Call("document.createElement", "button");
        JS.Set(button, "textContent", "Click me from Web#!");
        JS.Call("document.body.appendChild", button);
    }
}

public class InteractiveApp {
    public static void CreateWelcomeMessage() {
        var div = JS.Call("document.createElement", "div");
        JS.Set(div, "innerHTML", "&lt;h1&gt;Hello from Web#!&lt;/h1&gt;&lt;p&gt;This DOM was created using Web# code.&lt;/p&gt;");
        JS.Set(div, "style", "background: #f0f8ff; padding: 20px; border-radius: 8px; margin: 10px;");
        JS.Call("document.body.appendChild", div);
    }
}</code></pre>
    </div>

    <div class="demo-section">
        <h2>ğŸ® Interactive Demo</h2>
        <p>Click the buttons below to see Web# code in action:</p>
        
        <button onclick="ButtonDemo.Main()">
            ğŸ”˜ Create Button (ButtonDemo.Main)
        </button>
        
        <button onclick="InteractiveApp.CreateWelcomeMessage()">
            ğŸ’¬ Create Welcome Message
        </button>
        
        <button onclick="clearDemo()">
            ğŸ—‘ï¸ Clear Demo Area
        </button>

        <div id="demo-output" class="output">
            <p><em>ğŸ‘† Click the buttons above to see Web# generate DOM elements!</em></p>
        </div>
    </div>

    <div class="demo-section">
        <h2>âš™ï¸ Generated JavaScript Code</h2>
        <p>This is what the Web# compiler generated:</p>
        <pre><code id="generated-js">// Loading generated JavaScript...</code></pre>
    </div>

    <script>
        // JavaScript Interop Runtime (Generated by Web# Compiler)
        const JS = {
            Call: function(path, ...args) {
                const parts = path.split('.');
                let obj = window;
                for (let i = 0; i < parts.length - 1; i++) {
                    obj = obj[parts[i]];
                }
                const method = parts[parts.length - 1];
                return obj[method](...args);
            },
            
            Set: function(obj, prop, value) {
                obj[prop] = value;
            }
        };

        // Console.WriteLine polyfill for Web#
        const Console = {
            WriteLine: function(message) {
                console.log(message);
            }
        };

        // Generated classes from Web# source
        class ButtonDemo {
            static Main() {
                let button = JS.Call("document.createElement", "button");
                JS.Set(button, "textContent", "Click me from Web#!");
                JS.Call("document.body.appendChild", button);
            }
        }

        class InteractiveApp {
            static CreateWelcomeMessage() {
                let div = JS.Call("document.createElement", "div");
                JS.Set(div, "innerHTML", "<h1>Hello from Web#!</h1><p>This DOM was created using Web# code.</p>");
                JS.Set(div, "style", "background: #f0f8ff; padding: 20px; border-radius: 8px; margin: 10px;");
                JS.Call("document.body.appendChild", div);
            }
        }

        // Helper function to clear demo area
        function clearDemo() {
            // Remove all dynamically created elements
            const dynamicElements = document.querySelectorAll('body > div:not(.header):not(.demo-section)');
            dynamicElements.forEach(el => el.remove());
            
            // Reset demo output message
            document.getElementById('demo-output').innerHTML = 
                '<p><em>ğŸ‘† Click the buttons above to see Web# generate DOM elements!</em></p>';
        }

        // Show the generated JavaScript in the code block
        document.getElementById('generated-js').textContent = `// JavaScript Interop Runtime
const JS = {
  Call: function(path, ...args) {
    const parts = path.split('.');
    let obj = window;
    for (let i = 0; i < parts.length - 1; i++) {
      obj = obj[parts[i]];
    }
    const method = parts[parts.length - 1];
    return obj[method](...args);
  },
  
  Set: function(obj, prop, value) {
    obj[prop] = value;
  }
};

// Console.WriteLine polyfill for Web#
const Console = {
  WriteLine: function(message) {
    console.log(message);
  }
};

class ButtonDemo {
  static Main() {
    let button = JS.Call("document.createElement", "button");
    JS.Set(button, "textContent", "Click me from Web#!");
    JS.Call("document.body.appendChild", button);
  }
}

class InteractiveApp {
  static CreateWelcomeMessage() {
    let div = JS.Call("document.createElement", "div");
    JS.Set(div, "innerHTML", "<h1>Hello from Web#!</h1><p>This DOM was created using Web# code.</p>");
    JS.Set(div, "style", "background: #f0f8ff; padding: 20px; border-radius: 8px; margin: 10px;");
    JS.Call("document.body.appendChild", div);
  }
}`;

        console.log("ğŸ‰ Web# Phase 4 Demo Loaded!");
        console.log("âœ… JavaScript Interop is working!");
        console.log("ğŸ”§ Try calling: ButtonDemo.Main() or InteractiveApp.CreateWelcomeMessage()");
    </script>
</body>
</html>
